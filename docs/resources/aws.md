---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "dataplane_aws Resource - dataplane"
subcategory: ""
description: |-
  AWS Dataplane resource
---

# dataplane_aws (Resource)

AWS Dataplane resource

## Example Usage

```terraform
resource "dataplane_aws" "deltastream" {
  assume_role = {
    region   = "us-west-2"
    role_arn = "arn:aws:iam::123456789012:role/deltastream-infra-role"
  }

  cluster_configuration = {
    account_id    = "123456789012" # customer account id
    ds_account_id = "345678901234" # DeltaStream account ID

    product_artifacts_bucket = "s3-artifacts-buckets"
    product_version          = "1.0.0" # product version

    infra_id        = "ds123" # infra id (provided by DeltaStream)
    cluster_index   = "0"     # cluster index (provided by DeltaStream)
    eks_resource_id = "0"     # resource id (provided by DeltaStream)

    karpenter_role_name     = "arn:aws:iam::123456789012:role/karpenter-iam-role"
    karpenter_irsa_role_arn = "arn:aws:iam::123456789012:role/karpenter-irsa-role"
    interruption_queue_name = "ds123-0-0-interruption-queue"

    api_hostname    = "api.ds123.com"
    api_subnet_mode = "public"
    api_tls_mode    = "acme"

    o11y_hostname    = "o11y.ds123.com"
    o11y_subnet_mode = "public"
    o11y_tls_mode    = "acme"

    console_hostname = "console.deltastream.io"

    metrics_url            = "https://metrics-push-proxy.deltastream.io"
    dp_manager_cp_role_arn = "arn:aws:iam::123456789012:role/dp-manager-cp-role"

    # deployment roles
    aws_secrets_manager_ro_role_arn = "arn:aws:iam::123456789012:role/aws-secrets-ro-role"
    cw2loki_role_arn                = "arn:aws:iam::123456789012:role/cw2loki-role"
    deadman_alert_role_arn          = "arn:aws:iam::123456789012:role/deadman-alert-role"
    dp_manager_role_arn             = "arn:aws:iam::123456789012:role/dp-manager-role"
    ds_cross_account_role_arn       = "arn:aws:iam::123456789012:role/ds-cross-account-role"
    ecr_readonly_role_arn           = "arn:aws:iam::123456789012:role/ecr-readonly-role"
    infra_manager_role_arn          = "arn:aws:iam::123456789012:role/infra-manager-role"
    store_proxy_role_arn            = "arn:aws:iam::123456789012:role/store-proxy-role"
    loki_role_arn                   = "arn:aws:iam::123456789012:role/loki-role"
    tempo_role_arn                  = "arn:aws:iam::123456789012:role/tempo-role"
    thanos_sidecar_role_arn         = "arn:aws:iam::123456789012:role/thanos-sidecar-role"
    thanos_store_bucket_role_arn    = "arn:aws:iam::123456789012:role/thanos-store-bucket-role"
    thanos_store_compactor_role_arn = "arn:aws:iam::123456789012:role/thanos-store-compactor-role"
    thanos_store_gateway_role_arn   = "arn:aws:iam::123456789012:role/thanos-store-gateway-role"
    vault_init_role_arn             = "arn:aws:iam::123456789012:role/vault-init-role"
    vault_role_arn                  = "arn:aws:iam::123456789012:role/vault-role"
    workload_iam_role_arn           = "arn:aws:iam::123456789012:role/workload-iam-role"
    workload_manager_iam_role_arn   = "arn:aws:iam::123456789012:role/workload-manager-iam-role"

    # vpc info
    vpc_cidr             = "10.0.0.0/16"
    vpc_dns_ip           = "10.21.0.2"
    vpc_id               = "vpc-12345678901234567"
    public_subnet_ids    = ["subnet-12345678901234567", "subnet-12345678901234568"] # public subnet ids for eks
    private_subnet_ids   = ["subnet-12345678901234567", "subnet-12345678901234568"] # private subnet ids for eks
    private_link_subnets = ["subnet-12345678901234567", "subnet-12345678901234568"] # private subnet ids for private link

    workload_credentials_mode = "iamrole"
    workload_role_arn         = "arn:aws:iam::123456789012:role/workload-iam-role"
    workload_manager_role_arn = "arn:aws:iam::123456789012:role/workload-manager-iam-role"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `assume_role` (Attributes) Assume role configuration (see [below for nested schema](#nestedatt--assume_role))
- `configuration` (Attributes) Cluster configuration (see [below for nested schema](#nestedatt--configuration))

### Read-Only

- `status` (Attributes) (see [below for nested schema](#nestedatt--status))

<a id="nestedatt--assume_role"></a>
### Nested Schema for `assume_role`

Optional:

- `region` (String) The AWS region to use for the assume role.
- `role_arn` (String) Amazon Resource Name (ARN) of an IAM Role to assume prior to making API calls.
- `session_name` (String) An identifier for the assumed role session.


<a id="nestedatt--configuration"></a>
### Nested Schema for `configuration`

Required:

- `account_id` (String) The account ID hosting the DeltaStream dataplane.
- `api_hostname` (String) The hostname of the dataplane API endpoint.
- `api_subnet_mode` (String) The subnet mode for dataplane API endpoint.
- `api_tls_mode` (String) The TLS/HTTPS mode for dataplane API endpoint.
- `aws_load_balancer_controller_role_arn` (String) The ARN of the role to assume for managing AWS Load Balancer resources.
- `aws_secrets_manager_ro_role_arn` (String) The ARN of the role to assume for reading secrets from AWS secrets manager.
- `console_hostname` (String) The hostname of the DeltaStream console
- `cp_kafka_hosts` (List of String) The list of kafka brokers for control plane connectivity.
- `cp_kafka_listener_ports` (List of String) The list of kafka listener ports for control plane connectivity.
- `cw2loki_role_arn` (String) The ARN of the role to assume for managing CloudWatch-Loki resources.
- `cw2loki_sqs_url` (String) The SQS URL for ingesting CloudWatch data into observability tools.
- `deadman_alert_role_arn` (String) The ARN of the role to assume for managing deadman alert resources.
- `dp_manager_cp_role_arn` (String) The ARN of the control plane role to assume for data plane to control plane communication (provided by DeltaStream)
- `dp_manager_role_arn` (String) The ARN of the role to assume for managing dataplane resources.
- `ds_account_id` (String) The account ID provided by DeltaStream.
- `ds_cross_account_role_arn` (String) The ARN of the role for provising trust when accessing customer provided resources.
- `dynamodb_table_name` (String) The name of the DynamoDB table for storing credentials in the dataplane vault.
- `ecr_readonly_role_arn` (String) The ARN of the role to assume for read-only access to ECR.
- `eks_resource_id` (String) The resource ID of the DeltaStream dataplane (provided by DeltaStream).
- `infra_id` (String) The infra ID of the DeltaStream dataplane (provided by DeltaStream).
- `infra_manager_role_arn` (String) The ARN of the role to assume for managing infra resources.
- `interruption_queue_name` (String) The name of the SQS queue for handling interruption events.
- `kafka_cluster_name` (String) The name of the kafka cluster.
- `kafka_hosts` (List of String) The list of kafka brokers.
- `kafka_listener_ports` (List of String) The list of kafka listener ports.
- `kafka_role_arn` (String) The ARN of the role to assume for interacting with Kafka topcis and data.
- `kafka_role_external_id` (String) The external ID for the kafka role.
- `karpenter_irsa_role_arn` (String) The ARN of the role to assume by Karpenter.
- `karpenter_node_role_name` (String) The name of the role to assumed by nodes started by Karpenter.
- `kms_key_id` (String) The KMS key ID for encrypting credentials store in the dataplane vault.
- `loki_role_arn` (String) The ARN of the role to assume for managing Loki resources.
- `metrics_url` (String) The URL to push metrics.
- `o11y_bucket` (String) The S3 bucket for storing observability data.
- `o11y_hostname` (String) The hostname of the observability endpoint.
- `o11y_subnet_mode` (String) The subnet mode for observability endpoint.
- `o11y_tls_mode` (String) The TLS/HTTPS mode for observability endpoint.
- `private_link_subnets_ids` (List of String) The private subnet IDs of the private links from dataplane VPC.
- `private_subnet_ids` (List of String) The private subnet IDs hosting nodes for this cluster.
- `product_artifacts_bucket` (String) The S3 bucket for storing DeltaStream product artifacts.
- `product_version` (String) The version of the DeltaStream product. (provided by DeltaStream)
- `public_subnet_ids` (List of String) The public subnet IDs with internet gateway.
- `rds_resource_id` (String) The resource ID of the RDS instance for storing DeltaStream data.
- `serde_bucket` (String) The S3 bucket for storing SERDE artifacts.
- `store_proxy_role_arn` (String) The ARN of the role to assume to facilitate connection to customer stores.
- `tempo_role_arn` (String) The ARN of the role to assume for managing Tempo resources.
- `thanos_sidecar_role_arn` (String) The ARN of the role to assume for managing Thanos sidecar resources.
- `thanos_store_bucket_role_arn` (String) The ARN of the role to assume for managing Thanos store bucket resources.
- `thanos_store_compactor_role_arn` (String) The ARN of the role to assume for managing Thanos storage compactor resources.
- `thanos_store_gateway_role_arn` (String) The ARN of the role to assume for managing Thanos storage gateway resources.
- `vault_init_role_arn` (String) The ARN of the role to assume for configuring credential vault.
- `vault_role_arn` (String) The ARN of the role to assume for credential vault resources.
- `vpc_cidr` (String) The CIDR of the VPC.
- `vpc_dns_ip` (String) The VPC DNS server IP address.
- `vpc_id` (String) The VPC ID of the cluster.
- `workload_credentials_mode` (String) The mode for managing workload credentials.
- `workload_state_bucket` (String) The S3 bucket for storing workload state.

Optional:

- `api_tls_certificate_arn` (String) The ARN of the TLS certificate for the dataplane API endpoint.
- `cluster_index` (Number) The index of the cluster (provided by DeltaStream).
- `ds_region` (String) The AWS region provided by DeltaStream.
- `o11y_tls_certificate_arn` (String) The ARN of the TLS certificate for the observability endpoint.
- `stack` (String) The type of DeltaStream dataplane (default: prod).
- `workload_credentials_secret` (String) The name of the secret containing workload credentials if running in secret mode.
- `workload_manager_role_arn` (String) The ARN of the role to assume for managing workloads.
- `workload_role_arn` (String) The ARN of the role to assume for workloads.


<a id="nestedatt--status"></a>
### Nested Schema for `status`

Read-Only:

- `last_modified` (String) The time the dataplane was last updated.
- `product_version` (String) The version of the DeltaStream product installed on the dataplane.
- `provider_version` (String) The version of the DeltaStream provider used to install the dataplane.
